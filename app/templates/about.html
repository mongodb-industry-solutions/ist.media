<!DOCTYPE html>
<!--
    Copyright (c) 2024 MongoDB Inc.
    Author: Benjamin Lorenz <benjamin.lorenz@mongodb.com>
-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IST Media</title>
    <link rel="stylesheet" href="fontawesome/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro&display=swap"
	  rel="stylesheet">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/templatemo-xtra-blog.css" rel="stylesheet">
    <!-- favicons of different sizes -->
    <link rel="icon" type="image/png" sizes="16x16"   href="img/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32"   href="img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="48x48"   href="img/favicon-48x48.png">
    <link rel="icon" type="image/png" sizes="192x192" href="img/favicon-192x192.png">
    <link rel="apple-touch-icon" type="image/png" sizes="167x167" href="img/favicon-167x167.png">
    <link rel="apple-touch-icon" type="image/png" sizes="180x180" href="img/favicon-180x180.png">
    <style>
	table {
            width: 100%;
            border-collapse: collapse;
	}
	th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
	}
	th {
	    color: white;
            background-color: #007D59;
	}
	tr:nth-child(even) {
            background-color: #f9f9f9;
	}
	tr:hover {
            background-color: #e8e8e8;
	}
    </style>
</head>
<body>
    <header class="tm-header" id="tm-header">
        <div class="tm-header-wrapper">
            <button class="navbar-toggler" type="button" aria-label="Toggle navigation">
                <i class="fas fa-bars"></i>
            </button>
            <div class="tm-site-header">
		<div class="mb-3 mx-auto tm-site-logo">
		    <img style="width: 100%; border-radius: 50%;"
			 src="img/leaf.png"/>
		</div>
                <h1 class="text-center">IST Media</h1>
            </div>
            <nav class="tm-nav" id="tm-nav">
                <ul>
                    <li class="tm-nav-item"><a href="/" class="tm-nav-link">
                        <i class="fas fa-home"></i>
                        Home
                    </a></li>
                    <li class="tm-nav-item"><a href="/post" class="tm-nav-link">
                        <i class="fas fa-pen"></i>
                        Single Post
                    </a></li>
                    <li class="tm-nav-item"><a href="/insights" class="tm-nav-link">
                        <i class="fas fa-camera-retro"></i>
                        Insights
                    </a></li>
                    <li class="tm-nav-item active"><a href="/backstage" class="tm-nav-link">
                        <i class="fas fa-user"></i>
                        Backstage Area
                    </a></li>
                    <li class="tm-nav-item"><a href="/contact" class="tm-nav-link">
                        <i class="far fa-comments"></i>
                        Contact Us
                    </a></li>
                </ul>
            </nav>
            <div class="tm-mb-65">
                <a href="https://www.facebook.com/MongoDB/" class="tm-social-link">
                    <i class="fab fa-facebook tm-social-icon"></i>
                </a>
                <a href="https://twitter.com/MongoDB" class="tm-social-link">
                    <i class="fab fa-twitter tm-social-icon"></i>
                </a>
                <a href="https://www.instagram.com/mongodb/" class="tm-social-link">
                    <i class="fab fa-instagram tm-social-icon"></i>
                </a>
                <a href="https://www.linkedin.com/company/mongodbinc/" class="tm-social-link">
                    <i class="fab fa-linkedin tm-social-icon"></i>
                </a>
            </div>
            <p class="tm-mb-80 pr-5 text-white">
	      <br/>
	      Benjamin Lorenz
	      <br/>
	      MongoDB Inc. &copy; 2024
            </p>
        </div>
    </header>
    <div class="container-fluid">
        <main class="tm-main">
            <div class="row tm-row tm-mb-45">
                <div class="col-12">
                    <hr class="tm-hr-primary">
                </div>
            </div>
            <div class="row tm-row tm-mb-40">
                <div class="col-12">
                    <div class="mb-4">
			<h1 class="tm-color-primary tm-mb-30">
			    Backstage Area
		        </h1>
                        <p>
			    First and foremost &mdash; help about how to use this demo
			    <a href="/welcome" class="tm-color-primary">is available here</a>.
                        </p>
			<div style="padding: 2px"></div>

			<h2 class="pt-2 tm-color-primary tm-post-title tm-mt-40">
			    History of Visited Articles
			</h2>
			{% if history|length > 0 %}
			<p class="tm-pt-10">
			    {% for doc in history %}
			    <a class="tm-color-primary" href="/post?uuid={{ doc.uuid }}">
				{{ doc.title | truncate(80) }}
			    </a>
			    <br/>
			    {% endfor %}
			</p>
			<form method="POST" action="/delete_articles_history"
			      class="mb-5 ml-auto mr-0 tm-contact-form">
			    <div class="form-group row text-right">
				<div class="col-12">
				    <button class="tm-btn tm-btn-primary tm-btn-small">
					Delete History
				    </button>
				</div>
                            </div>
			</form>
			{% else %}
			<p class="tm-pt-10">
			    <i>List is empty</i>
			</p>
			{% endif %}

			<h2 class="pt-2 tm-color-primary tm-post-title tm-mt-40">
			    AI-Generated Insights
			</h2>
			{% if gen_ai_cache|length > 0 %}
			<p class="tm-pt-10">
			    {% for entry in gen_ai_cache %}
			    {{ entry.question | truncate(80) }}
			    &nbsp;
			    <a class="tm-color-primary" style="font-size: smaller"
			       href="/delete_insights_history_item/{{ entry._id | string }}">
				[delete]
			    </a>
			    <br/>
			    {% endfor %}
			</p>
			{% else %}
			<p class="tm-pt-10">
			    <i>List is empty</i>
			</p>
			{% endif %}

			<h2 class="pt-2 tm-color-primary tm-post-title tm-mt-40 tm-mb-25">
			    Content to be used
			</h2>
			<form method="POST" action="/select_news_source">
			    <div class="radio-container">
				<input type="radio" id="artificial" name="news_option" value="artificial"
				       {% if news_source == "news" %}checked="checked"{% endif %}>
				<label for="artificial">Artificial, updated regularly</label>
			    </div>
			    <div class="radio-container">
				<input type="radio" id="traditional" name="news_option" value="traditional"
				       {% if news_source == "business_news" %}checked="checked"{% endif %}>
				<label for="traditional">Traditional, used at .local NYC 2024</label>
			    </div>
			    <div class="form-group row text-right">
				<div class="col-12">
				    <button type="submit" class="tm-btn tm-btn-primary tm-btn-small">
					Select Content
				    </button>
				</div>
                            </div>
			</form>

			<h2 class="pt-2 tm-color-primary tm-post-title tm-mt-40">
			    Current IP Address
			</h2>
			<p class="tm-pt-10">
			    {{ loc.ip }}
			    {% if loc.country != " - " %}
			    <br/>{{ loc.city }}, {{ loc.country }}
			    {% endif %}
			</p>

			<h2 class="pt-2 tm-color-primary tm-post-title tm-mt-40">
			    Access Statistics per Country
			</h2>
			{% if country_stats|length > 0 %}
			<p class="tm-pt-10">
			    <table>
				<thead>
				    <tr>
					<th>ISO</th>
					<th>Country</th>
					<th>Count</th>
				    </tr>
				</thead>
				<tbody>
				    {% for entry in country_stats %}
				    <tr>
					<td>{{ entry._id }}</td>
					<td>
					    <span style="font-weight: bold">
						{{ entry.country }}
					    </span>
					</td>
					<td>
					    <span style="font-weight: bold">
						{{ entry.access_count }}
					    </span>
					</td>
				    </tr>
				    {% for city in entry.top_cities %}
				    <tr>
					<td></td>
					<td>
					    <span style="font-size: smaller">
						&nbsp;&nbsp;&nbsp;&nbsp;{{ city.city }}
					    </span>
					</td>
					<td>
					    <span style="font-size: smaller">
						{{ city.access_count }}
					    </span>
					</td>
				    </tr>
				    {% endfor %}
				    {% endfor %}
				</tbody>
			    </table>
			</p>
			{% else %}
			<p class="tm-pt-10">
			    <i>List is empty</i>
			</p>
			{% endif %}

			<h2 class="pt-2 tm-color-primary tm-post-title tm-mt-40">
			    Access Statistics per Path
			</h2>
			{% if path_stats|length > 0 %}
			<p class="tm-pt-10">
			    <table>
				<thead>
				    <tr>
					<th>Path</th>
					<th>Count</th>
				    </tr>
				</thead>
				<tbody>
				    {% for entry in path_stats %}
				    <tr>
					<td>{{ entry._id | truncate(45) }}</td>
					<td>{{ entry.access_count }}</td>
				    </tr>
				    {% endfor %}
				</tbody>
			    </table>
			</p>
			{% else %}
			<p class="tm-pt-10">
			    <i>List is empty</i>
			</p>
			{% endif %}


			{#
			<h2 class="pt-2 tm-color-primary tm-post-title tm-mt-40">
			    Usage Stats (nginx/uwsgi)
			</h2>
			<p class="tm-pt-10">
			    The following chart was calculated by GPT-4, based on the
			    uploaded nginx access.log file. Snapshot contains all data
			    until April 19th 2024 18:00 CEST.
			</p>
			<img style="width: 100%; margin-top: 20px"
			     src="img/nginx-up-to-week-16.png" alt="Image">
			#}


                    </div>
                </div>
            </div>
	    <footer class="row tm-row">
                <div class="col-md-6 col-12 tm-color-gray">
                  Design: <a href="https://templatemo.com/tm-553-xtra-blog"
			     rel="noopener" target="_blank"
			     class="tm-external-link">TemplateMo</a>
                </div>
                <div class="col-md-6 col-12 tm-color-gray tm-copyright">
                    Copyright &copy; 2024 MongoDB Inc.
                </div>
            </footer>
        </main>
    </div>
    <script src="js/jquery.min.js"></script>
    <script src="js/templatemo-script.js"></script>
</body>
</html>
